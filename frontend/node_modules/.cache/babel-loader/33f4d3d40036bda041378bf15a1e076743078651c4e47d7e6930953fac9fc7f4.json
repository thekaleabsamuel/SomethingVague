{"ast":null,"code":"var _jsxFileName = \"/Users/new/Downloads/Projects/online-radio-station/src/components/AuthSystem/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport AdminTrackManager from './AdminTrackManager';\nimport '../../styles/auth.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Profile({\n  user,\n  updateUser\n}) {\n  _s();\n  const [displayName, setDisplayName] = useState((user === null || user === void 0 ? void 0 : user.displayName) || '');\n  const [profilePicture, setProfilePicture] = useState(null);\n  const [previewUrl, setPreviewUrl] = useState((user === null || user === void 0 ? void 0 : user.profilePicture) || '');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n\n  // Handle profile image upload\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length === 0) return;\n    const file = acceptedFiles[0];\n    if (!file.type.startsWith('image/')) {\n      setError('Please upload an image file');\n      return;\n    }\n    setProfilePicture(file);\n    setPreviewUrl(URL.createObjectURL(file));\n    setError('');\n  }, []);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif']\n    },\n    maxFiles: 1\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setMessage('');\n    setError('');\n    try {\n      const formData = new FormData();\n      formData.append('displayName', displayName);\n      if (profilePicture) {\n        formData.append('profilePicture', profilePicture);\n      }\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:5001/api/users/profile', {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || 'Update failed');\n      }\n      if (updateUser) {\n        updateUser(data.user);\n      }\n      setMessage('Profile updated successfully');\n    } catch (err) {\n      setError('Failed to update profile: ' + (err.message || 'Unknown error'));\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please log in to view your profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Profile Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"success-message\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Display Name\",\n          value: displayName,\n          onChange: e => setDisplayName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Profile Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ...getRootProps(),\n            className: \"dropzone\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ...getInputProps()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Drag & drop a profile picture here, or click to select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), previewUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"artwork-preview\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: previewUrl,\n                alt: \"Profile preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isSubmitting,\n          children: isSubmitting ? 'Updating...' : 'Update Profile'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), user.role === 'ADMIN' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Admin Tools\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AdminTrackManager, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"NyO23CCB6jcoq1zhGjm07Udibx8=\", false, function () {\n  return [useDropzone];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useCallback","useDropzone","AdminTrackManager","jsxDEV","_jsxDEV","Profile","user","updateUser","_s","displayName","setDisplayName","profilePicture","setProfilePicture","previewUrl","setPreviewUrl","isSubmitting","setIsSubmitting","message","setMessage","error","setError","onDrop","acceptedFiles","length","file","type","startsWith","URL","createObjectURL","getRootProps","getInputProps","accept","maxFiles","handleSubmit","e","preventDefault","formData","FormData","append","token","localStorage","getItem","response","fetch","method","headers","body","data","json","ok","Error","err","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","placeholder","value","onChange","target","src","alt","disabled","role","_c","$RefreshReg$"],"sources":["/Users/new/Downloads/Projects/online-radio-station/src/components/AuthSystem/Profile.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport AdminTrackManager from './AdminTrackManager';\nimport '../../styles/auth.css';\n\nfunction Profile({ user, updateUser }) {\n  const [displayName, setDisplayName] = useState(user?.displayName || '');\n  const [profilePicture, setProfilePicture] = useState(null);\n  const [previewUrl, setPreviewUrl] = useState(user?.profilePicture || '');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n\n  // Handle profile image upload\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length === 0) return;\n    \n    const file = acceptedFiles[0];\n    if (!file.type.startsWith('image/')) {\n      setError('Please upload an image file');\n      return;\n    }\n\n    setProfilePicture(file);\n    setPreviewUrl(URL.createObjectURL(file));\n    setError('');\n  }, []);\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif']\n    },\n    maxFiles: 1\n  });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setMessage('');\n    setError('');\n\n    try {\n      const formData = new FormData();\n      formData.append('displayName', displayName);\n      if (profilePicture) {\n        formData.append('profilePicture', profilePicture);\n      }\n\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:5001/api/users/profile', {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Update failed');\n      }\n\n      if (updateUser) {\n        updateUser(data.user);\n      }\n\n      setMessage('Profile updated successfully');\n    } catch (err) {\n      setError('Failed to update profile: ' + (err.message || 'Unknown error'));\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!user) {\n    return <p>Please log in to view your profile</p>;\n  }\n\n  return (\n    <div className=\"profile-container\">\n      <div className=\"profile-section\">\n        <h2>Profile Settings</h2>\n        \n        {error && <p className=\"error-message\">{error}</p>}\n        {message && <p className=\"success-message\">{message}</p>}\n        \n        <form onSubmit={handleSubmit}>\n          <input \n            type=\"text\"\n            placeholder=\"Display Name\"\n            value={displayName}\n            onChange={(e) => setDisplayName(e.target.value)}\n          />\n          \n          <div className=\"upload-section\">\n            <h3>Profile Picture</h3>\n            <div {...getRootProps()} className=\"dropzone\">\n              <input {...getInputProps()} />\n              <p>Drag & drop a profile picture here, or click to select</p>\n              {previewUrl && (\n                <div className=\"artwork-preview\">\n                  <img src={previewUrl} alt=\"Profile preview\" />\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <button type=\"submit\" disabled={isSubmitting}>\n            {isSubmitting ? 'Updating...' : 'Update Profile'}\n          </button>\n        </form>\n      </div>\n\n      {user.role === 'ADMIN' && (\n        <div className=\"admin-section\">\n          <h2>Admin Tools</h2>\n          <AdminTrackManager />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Profile;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}